!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s=0)}([function(t,e,s){s(1),t.exports=s(2)},function(t,e,s){"use strict";s.r(e);var i={game:null,origindy:0,originxAnimation:0,speedUp:0,lowerSpeed:-5,collisionTolerance:0,spriteframes:[{originx:1338,sx:1338,sy:2,sw:88,sh:94,dx:15,dy:0,dw:44,dh:48,increment:4},{originx:1866,sx:1866,sy:35,sw:120,sh:60,dx:15,dy:0,dw:60,dh:30,increment:2},{sx:1782,sy:2,sw:80,sh:90,dx:15,dy:0,dw:40,dh:48}],framesCount:0,framesCount2:0,crounch:!1,frameNbr:0,init:function(t){this.game=t,this.frameNbr=0,this.speedUp=0,this.originxAnimation=this.spriteframes[this.frameNbr].originx+2*this.spriteframes[this.frameNbr].sw,this.spriteframes[0].dy=this.game.canvas.height-this.spriteframes[0].dh-4,this.origindy=this.game.canvas.height-this.spriteframes[0].dh-4,this.collisionTolerance=this.spriteframes[0].dw/3,this.drawPlayer()},drawPlayer:function(){this.game.ctx.drawImage(this.game.sprite,this.spriteframes[this.frameNbr].sx,this.spriteframes[this.frameNbr].sy,this.spriteframes[this.frameNbr].sw,this.spriteframes[this.frameNbr].sh,this.spriteframes[this.frameNbr].dx,this.spriteframes[this.frameNbr].dy,this.spriteframes[this.frameNbr].dw,this.spriteframes[this.frameNbr].dh)},update:function(){this.framesCount++,this.framesCount2++,this.spriteframes[0].dy+=-this.speedUp,this.spriteframes[0].dy<=4&&(this.spriteframes[0].dy=4,this.speedUp+=-1),this.framesCount2>=6&&(this.framesCount2=0,this.speedUp-=2,!0===this.crounch&&(this.speedUp-=4)),this.spriteframes[0].dy>=this.origindy&&(this.spriteframes[0].dy=this.origindy,this.speedUp=0,this.game.gameController.keypressed=!1),this.framesCount>=7&&(this.framesCount=0,this.spriteframes[this.frameNbr].sx+=this.spriteframes[this.frameNbr].sw,this.spriteframes[this.frameNbr].sx>=this.spriteframes[this.frameNbr].originx+this.spriteframes[this.frameNbr].increment*this.spriteframes[this.frameNbr].sw&&(this.spriteframes[this.frameNbr].sx=this.originxAnimation)),this.spriteframes[0].dy<this.origindy&&(this.spriteframes[0].sx=this.spriteframes[this.frameNbr].originx),this.spriteframes[0].dy==this.origindy&&!0===this.crounch?(this.frameNbr=1,this.originxAnimation=this.spriteframes[this.frameNbr].originx):(this.frameNbr=0,this.originxAnimation=this.spriteframes[this.frameNbr].originx+2*this.spriteframes[this.frameNbr].sw),1==this.frameNbr&&(this.spriteframes[this.frameNbr].dy=this.game.canvas.height-this.spriteframes[this.frameNbr].dh-4),this.checkCollision(),this.drawPlayer()},moveUp:function(){this.speedUp+=7,this.framesCount2=0},checkCollision:function(){var t=this;this.game.opponent.forEach(function(e){if("cactus"===e.type){if(t.spriteframes[t.frameNbr].dx+t.spriteframes[t.frameNbr].dw-t.collisionTolerance>=e.dx&&t.spriteframes[t.frameNbr].dx+t.collisionTolerance<=e.dx+e.spriteframes[e.cactusType].dw&&t.spriteframes[t.frameNbr].dy+t.spriteframes[t.frameNbr].dh>=e.dy){var s=t.spriteframes[t.frameNbr].dy;t.frameNbr=2,t.spriteframes[t.frameNbr].dy=s,t.drawPlayer(),t.game.gameOver()}}else if(t.spriteframes[t.frameNbr].dx+t.spriteframes[t.frameNbr].dw-t.collisionTolerance>=e.dx&&t.spriteframes[t.frameNbr].dx+t.collisionTolerance<=e.dx+e.frame[e.step].dw&&t.spriteframes[t.frameNbr].dy>=e.dy-e.frame[e.step].dh&&t.spriteframes[t.frameNbr].dy-t.spriteframes[t.frameNbr].dh<=e.dy){var i=t.spriteframes[t.frameNbr].dy;t.frameNbr=2,t.spriteframes[t.frameNbr].dy=i,t.drawPlayer(),t.game.gameOver()}})}},r={game:null,txt:"Press S to start and restart the game. Use the ARROWS keys to control the dino and E to play and pause the song",Elt:null,parent:null,frames:[{sx:2,sy:2,sw:72,sh:64,dx:0,dy:0,dw:36,dh:32},{sx:954,sy:29,sw:381,sh:21,dx:0,dy:0,dw:190,dh:10}],init:function(t){var e=this;this.game=t,this.Elt=document.createElement("p"),this.Elt.style.color="#2071FF",this.Elt.style.position="absolute",this.Elt.style.marginTop="180px";var s=document.createTextNode(this.txt);this.Elt.appendChild(s),this.parent=document.getElementsByClassName("game")[0],this.parent.appendChild(this.Elt),this.frames.forEach(function(t){t.dx=e.game.canvas.width/2-t.dw/2}),this.frames[1].dy=this.game.canvas.height/2-this.frames[0].dh,this.frames[0].dy=this.game.canvas.height/2},drawMsg:function(t){this.game.ctx.drawImage(this.game.sprite,t.sx,t.sy,t.sw,t.sh,t.dx,t.dy,t.dw,t.dh)},endmsg:function(){this.Elt.style.display="none"},gameOverMsg:function(){var t=this;this.frames.forEach(function(e){t.drawMsg(e)})}},a={game:null,key:"s",keypressed:!1,restartPressed:!1,init:function(t){this.game=t,this.listenningStartkey(),this.restartPressed=!1,this.keypressed=!1},listenningStartkey:function(){var t=this;window.addEventListener("keydown",function(e){!0===t.game.willstart&&"s"===e.key&&(t.game.msg.endmsg(),t.game.animate(),t.game.willstart=!1),"e"===e.key&&(0==t.game.songisplaying?(t.game.trexSound.play(),t.game.songisplaying=!0):(t.game.trexSound.pause(),t.game.songisplaying=!1))})},listenningKey:function(){var t=this;window.addEventListener("keydown",function(e){"38"==e.keyCode?(0==t.keypressed&&0==t.game.willstart&&(t.game.player.moveUp(),t.game.jumpSound.play()),t.keypressed=!0):"40"==e.keyCode?(t.keypressed=!0,t.game.player.crounch=!0):"83"==e.keyCode&&0==t.game.willstart&&(t.game.willstart=!0,t.game.restartGame())}),window.addEventListener("keyup",function(e){"40"==e.keyCode&&(t.game.player.crounch=!1)})},easter:function(){this.game.trexSound}},n={game:null,maxOffset:600,offset:0,sx:2,sy:104,sw:2400,sh:24,dx:0,dy:0,dw:1200,dh:11,init:function(t){this.game=t,this.dy=this.game.canvas.height-this.dh,this.drawBg()},drawBg:function(){this.game.ctx.drawImage(this.game.sprite,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh)},update:function(){this.dx>-this.maxOffset?(this.dx+=-this.game.speed,this.drawBg()):(this.dx=0,this.drawBg())}};function h(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.frame={sx:174,sy:2,sw:84,sh:27,dw:42,dh:13.5},this.dx=0,this.dy=0,this.speed=1}var e,s,i;return e=t,(s=[{key:"drawCloud",value:function(){this.game.ctx.drawImage(this.game.sprite,this.frame.sx,this.frame.sy,this.frame.sw,this.frame.sh,this.dx,this.dy,this.frame.dw,this.frame.dh)}},{key:"init",value:function(t){this.game=t,this.dx=Math.ceil(Math.random()*this.game.canvas.width+this.frame.dw),this.dy=Math.floor(Math.random()*(this.game.canvas.height/3))}},{key:"update",value:function(){this.dx+this.frame.dw<0&&(this.dx=this.game.canvas.width+Math.ceil(250*Math.random())),this.dx+=-this.speed,this.drawCloud()}}])&&h(e.prototype,s),i&&h(e,i),t}();function d(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.originx=260,this.game=e,this.type="bird",this.frame=[{sx:260,sy:14,sw:92,sh:68,dw:46,dh:34},{sx:356,sy:2,sw:92,sh:60,dw:46,dh:30}],this.dx=0,this.dy=0,this.step=0,this.maxStep=1,this.speed=2,this.framescount=0}var e,s,i;return e=t,(s=[{key:"init",value:function(){this.dx=this.game.canvas.width+10,this.posSelector()}},{key:"drawBird",value:function(){this.game.ctx.drawImage(this.game.sprite,this.frame[this.step].sx,this.frame[this.step].sy,this.frame[this.step].sw,this.frame[this.step].sh,this.dx,this.dy,this.frame[this.step].dw,this.frame[this.step].dh)}},{key:"update",value:function(){this.framescount=this.framescount+1,this.framescount>=8&&(this.step<this.maxStep?this.step+=1:this.step=0,this.framescount=0),this.dx-=1.125*this.game.speed,this.drawBird()}},{key:"posSelector",value:function(){var t=10*Math.random();this.dy=t>5?this.game.canvas.height/2:this.game.canvas.height-40}}])&&d(e.prototype,s),i&&d(e,i),t}();function p(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.type="cactus",this.spriteframes=[{sx:446,sy:2,sw:68,sh:70,dw:34,dh:35},{sx:514,sy:2,sw:68,sh:70,dw:34,dh:35},{sx:581,sy:2,sw:68,sh:70,dw:34,dh:35},{sx:652,sy:2,sw:98,sh:100,dw:49,dh:50},{sx:752,sy:2,sw:98,sh:100,dw:49,dh:50},{sx:850,sy:2,sw:98,sh:102,dw:49,dh:50}],this.dx=0,this.dy=0,this.cactusType=0,this.speedX=0}var e,s,i;return e=t,(s=[{key:"init",value:function(){this.speedX=this.game.speed,this.cactusType=Math.floor(Math.random()*this.spriteframes.length),this.dx=this.game.canvas.width+this.spriteframes[this.cactusType].dw,this.dy=this.game.canvas.height-this.spriteframes[this.cactusType].dh-4}},{key:"drawCactus",value:function(){this.game.ctx.drawImage(this.game.sprite,this.spriteframes[this.cactusType].sx,this.spriteframes[this.cactusType].sy,this.spriteframes[this.cactusType].sw,this.spriteframes[this.cactusType].sh,this.dx,this.dy,this.spriteframes[this.cactusType].dw,this.spriteframes[this.cactusType].dh)}},{key:"update",value:function(){this.dx-=this.game.speed,this.drawCactus()}}])&&p(e.prototype,s),i&&p(e,i),t}(),c=document.getElementsByTagName("html")[0];"nojs"===c.className&&(c.className="js"),{player:i,msg:r,gameController:a,ground:n,willstart:null,timeCount:0,timeBeforeSpeedUp:900,speed:0,maxspeed:12,cloudNbr:3,clouds:[],opponent:[],opponentDelay:0,gravity:1,canvas:null,ctx:null,sprite:new Image,src:"./images/sprite.png",requestId:0,crashSound:new Audio("./sounds/die.mp3"),jumpSound:new Audio("./sounds/jump.mp3"),trexSound:new Audio("./sounds/trex.mp3"),songisplaying:!1,pointdelay:0,points:0,init:function(){var t=this;this.pointdelay=0,this.opponentDelay=0,this.timeCount=0,this.pointdelay=0,this.speed=5,this.willstart=!0,this.canvas=document.getElementsByClassName("game__canvas")[0],this.ctx=this.canvas.getContext("2d"),this.sprite.src=this.src,this.resize(),this.points=document.getElementsByClassName("score")[0],this.points.textContent="0",this.msg.init(this),this.sprite.addEventListener("load",function(){t.gameController.init(t),t.ground.init(t),t.player.init(t)});for(var e=0;e<this.cloudNbr;e++){var s=new o;s.init(this),this.clouds.push(s)}},resize:function(){document.getElementsByClassName("game")[0];this.canvas.width=600,this.canvas.height=150},randomizeOpp:function(){if(10*Math.random()<7){var t=new f(this);t.init(),this.opponent.push(t)}else{var e=new m(this);e.init(),this.opponent.push(e)}},removeOpp:function(){var t=this;this.opponent.forEach(function(e){e.update(),"cactus"===e.type?e.dx+e.spriteframes[e.cactusType].dw<0&&t.opponent.shift():e.dx+e.frame[e.step].dw<0&&t.opponent.shift()})},animate:function(){var t=this;if(this.requestId=window.requestAnimationFrame(function(){return t.animate()}),this.opponentDelay++,this.timeCount++,this.pointdelay++,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.gameController.listenningKey(),this.ground.update(),this.clouds.forEach(function(t){return t.update()}),this.timeCount>=this.timeBeforeSpeedUp&&(this.timeCount=0,this.speed+=.5,this.speed>=this.maxspeed&&(this.speed=this.maxspeed)),this.opponentDelay>=220/this.speed+Math.ceil(240*Math.random())&&(this.randomizeOpp(),this.opponentDelay=0),45==this.pointdelay){this.pointdelay=0;var e=parseInt(this.points.textContent,10);e=(++e).toString(10),this.points.textContent=e}this.opponent.length>0&&this.removeOpp(),this.player.update()},gameOver:function(){this.msg.gameOverMsg(),this.crashSound.play(),window.cancelAnimationFrame(this.requestId),this.restart=!0},restartGame:function(){console.log("executed"),window.cancelAnimationFrame(this.requestId),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.clouds.length>0&&(this.clouds=[]),this.opponent.length>0&&(this.opponent=[]),this.init()}}.init()},function(t,e){}]);